"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/generate-script";
exports.ids = ["pages/api/generate-script"];
exports.modules = {

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate-script&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fgenerate-script.js&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate-script&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fgenerate-script.js&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_generate_script_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/generate-script.js */ \"(api-node)/./pages/api/generate-script.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_generate_script_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_generate_script_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_generate_script_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_generate_script_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/generate-script\",\n        pathname: \"/api/generate-script\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_generate_script_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGZ2VuZXJhdGUtc2NyaXB0JnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlMkZhcGklMkZnZW5lcmF0ZS1zY3JpcHQuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ0U7QUFDMUQ7QUFDMkQ7QUFDM0Q7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDBEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQywwREFBUTtBQUNwQztBQUNPLHdCQUF3Qix5R0FBbUI7QUFDbEQ7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9nZW5lcmF0ZS1zY3JpcHQuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgJ2RlZmF1bHQnKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsICdjb25maWcnKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2dlbmVyYXRlLXNjcmlwdFwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2dlbmVyYXRlLXNjcmlwdFwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6ICcnLFxuICAgICAgICBmaWxlbmFtZTogJydcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate-script&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fgenerate-script.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/generate-script.js":
/*!**************************************!*\
  !*** ./pages/api/generate-script.js ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"openai\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([openai__WEBPACK_IMPORTED_MODULE_0__]);\nopenai__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// This file should be saved at /pages/api/generate-script.js\n\n// Add the API configuration\nconst config = {\n    api: {\n        bodyParser: {\n            sizeLimit: '1mb'\n        },\n        externalResolver: true\n    }\n};\n// Set up CORS headers helper\nconst setCorsHeaders = (res)=>{\n    res.setHeader('Access-Control-Allow-Credentials', true);\n    res.setHeader('Access-Control-Allow-Origin', '*');\n    res.setHeader('Access-Control-Allow-Methods', 'GET,OPTIONS,POST');\n    res.setHeader('Access-Control-Allow-Headers', 'X-CSRF-Token, X-Requested-With, Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version');\n};\n// Initialize OpenAI with your API key\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY\n});\n// Function to create video with HeyGen\nconst createHeyGenVideo = async (script, username)=>{\n    try {\n        const heygenResponse = await fetch('https://api.heygen.com/v2/video/generate', {\n            method: 'POST',\n            headers: {\n                'X-API-KEY': process.env.HEYGEN_API_KEY,\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                video_inputs: [\n                    {\n                        character: {\n                            type: \"avatar\",\n                            avatar_id: \"Raul_expressive_2024112501\",\n                            avatar_style: \"normal\"\n                        },\n                        voice: {\n                            type: \"text\",\n                            input_text: script,\n                            voice_id: \"a426f8a763824ceaad3a2eb29c68e121\",\n                            speed: 1.0\n                        },\n                        background: {\n                            type: \"color\",\n                            value: \"#ffffff\" // White background, customize as needed\n                        }\n                    }\n                ],\n                dimension: {\n                    width: 1280,\n                    height: 720\n                },\n                aspect_ratio: \"16:9\",\n                test: false // Set to true for testing without using credits\n            })\n        });\n        const heygenData = await heygenResponse.json();\n        if (!heygenResponse.ok) {\n            throw new Error(`HeyGen API error: ${heygenData.message || 'Unknown error'}`);\n        }\n        return {\n            success: true,\n            video_id: heygenData.data.video_id\n        };\n    } catch (error) {\n        console.error('Error creating HeyGen video:', error);\n        throw error;\n    }\n};\nasync function handler(req, res) {\n    // Handle preflight OPTIONS request\n    if (req.method === 'OPTIONS') {\n        setCorsHeaders(res);\n        return res.status(200).end();\n    }\n    // Ensure we're handling a POST request\n    if (req.method !== 'POST') {\n        return res.status(405).json({\n            error: 'Method not allowed. Please use POST.'\n        });\n    }\n    try {\n        // Set CORS headers\n        setCorsHeaders(res);\n        // Get the username and optional createVideo flag from the request body\n        const { username, createVideo = false } = req.body;\n        if (!username) {\n            return res.status(400).json({\n                error: 'Username is required'\n            });\n        }\n        // Create the prompt for OpenAI\n        const prompt = `'Generate a welcome video script for a user named ${username}. You act as Cilian, an IT specialist from the IT department of the St. Johns Medical Centre in Dublin, Ireland. Your script should be almost identical to this one. Please only change a word or two but stay in the context.   - Welcome ${username} - I'm Cillian from the IT department. As you might know, we've been getting a lot of phishing emails lately … I'm glad seeing you contributing to the company's cyber security. And who knows, maybe you learn a thing or two for your private digital security … - '`;\n        // Call OpenAI API to generate the script using the chat completions endpoint\n        const completion = await openai.chat.completions.create({\n            model: \"gpt-3.5-turbo\",\n            messages: [\n                {\n                    role: \"system\",\n                    content: \"You are a helpful assistant that creates personalized welcome scripts.\"\n                },\n                {\n                    role: \"user\",\n                    content: prompt\n                }\n            ],\n            max_tokens: 250,\n            temperature: 0.7\n        });\n        // Extract the generated script\n        const generatedScript = completion.choices[0].message.content.trim();\n        // If createVideo is false, just return the script (your original functionality)\n        if (!createVideo) {\n            return res.status(200).json({\n                success: true,\n                script: generatedScript\n            });\n        }\n        // If createVideo is true, also create the HeyGen video\n        try {\n            const videoResult = await createHeyGenVideo(generatedScript, username);\n            return res.status(200).json({\n                success: true,\n                script: generatedScript,\n                video_id: videoResult.video_id,\n                message: 'Script generated and video creation started'\n            });\n        } catch (videoError) {\n            // If video creation fails, still return the script\n            console.error('Video creation failed:', videoError);\n            return res.status(200).json({\n                success: true,\n                script: generatedScript,\n                video_error: 'Video creation failed, but script was generated successfully',\n                video_error_details: videoError.message\n            });\n        }\n    } catch (error) {\n        console.error('Error generating script:', error);\n        // Determine the error status code and message\n        const statusCode = error.response?.status || 500;\n        const errorMessage = error.response?.data?.error?.message || error.message || 'Failed to generate script';\n        return res.status(statusCode).json({\n            success: false,\n            error: errorMessage\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9nZW5lcmF0ZS1zY3JpcHQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsNkRBQTZEO0FBQ2pDO0FBRTVCLDRCQUE0QjtBQUNyQixNQUFNQyxTQUFTO0lBQ3BCQyxLQUFLO1FBQ0hDLFlBQVk7WUFDVkMsV0FBVztRQUNiO1FBQ0FDLGtCQUFrQjtJQUNwQjtBQUNGLEVBQUU7QUFFRiw2QkFBNkI7QUFDN0IsTUFBTUMsaUJBQWlCLENBQUNDO0lBQ3RCQSxJQUFJQyxTQUFTLENBQUMsb0NBQW9DO0lBQ2xERCxJQUFJQyxTQUFTLENBQUMsK0JBQStCO0lBQzdDRCxJQUFJQyxTQUFTLENBQUMsZ0NBQWdDO0lBQzlDRCxJQUFJQyxTQUFTLENBQ1gsZ0NBQ0E7QUFFSjtBQUVBLHNDQUFzQztBQUN0QyxNQUFNQyxTQUFTLElBQUlULDhDQUFNQSxDQUFDO0lBQ3hCVSxRQUFRQyxRQUFRQyxHQUFHLENBQUNDLGNBQWM7QUFDcEM7QUFFQSx1Q0FBdUM7QUFDdkMsTUFBTUMsb0JBQW9CLE9BQU9DLFFBQVFDO0lBQ3ZDLElBQUk7UUFDRixNQUFNQyxpQkFBaUIsTUFBTUMsTUFBTSw0Q0FBNEM7WUFDN0VDLFFBQVE7WUFDUkMsU0FBUztnQkFDUCxhQUFhVCxRQUFRQyxHQUFHLENBQUNTLGNBQWM7Z0JBQ3ZDLGdCQUFnQjtZQUNsQjtZQUNBQyxNQUFNQyxLQUFLQyxTQUFTLENBQUM7Z0JBQ25CQyxjQUFjO29CQUFDO3dCQUNiQyxXQUFXOzRCQUNUQyxNQUFNOzRCQUNOQyxXQUFXOzRCQUNYQyxjQUFjO3dCQUNoQjt3QkFDQUMsT0FBTzs0QkFDTEgsTUFBTTs0QkFDTkksWUFBWWhCOzRCQUNaaUIsVUFBVTs0QkFDVkMsT0FBTzt3QkFDVDt3QkFDQUMsWUFBWTs0QkFDVlAsTUFBTTs0QkFDTlEsT0FBTyxVQUFVLHdDQUF3Qzt3QkFDM0Q7b0JBQ0Y7aUJBQUU7Z0JBQ0ZDLFdBQVc7b0JBQ1RDLE9BQU87b0JBQ1BDLFFBQVE7Z0JBQ1Y7Z0JB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V0FBV0ksTUFBTUosT0FBTyxJQUFJO1FBRTlFLE9BQU90QyxJQUFJOEMsTUFBTSxDQUFDcUIsWUFBWWhDLElBQUksQ0FBQztZQUNqQ0ksU0FBUztZQUNURyxPQUFPMkI7UUFDVDtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYXNjaGF2b2xrZXIvRGVza3RvcC9JbnN0cnVjdGlvbmFsIERlc2lnbiBQb3J0Zm9saW8gc2xpZGVzIC9HaXRIdWIvcGFnZXMvYXBpL2dlbmVyYXRlLXNjcmlwdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGlzIGZpbGUgc2hvdWxkIGJlIHNhdmVkIGF0IC9wYWdlcy9hcGkvZ2VuZXJhdGUtc2NyaXB0LmpzXG5pbXBvcnQgT3BlbkFJIGZyb20gJ29wZW5haSc7XG5cbi8vIEFkZCB0aGUgQVBJIGNvbmZpZ3VyYXRpb25cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIGFwaToge1xuICAgIGJvZHlQYXJzZXI6IHtcbiAgICAgIHNpemVMaW1pdDogJzFtYicsXG4gICAgfSxcbiAgICBleHRlcm5hbFJlc29sdmVyOiB0cnVlLFxuICB9LFxufTtcblxuLy8gU2V0IHVwIENPUlMgaGVhZGVycyBoZWxwZXJcbmNvbnN0IHNldENvcnNIZWFkZXJzID0gKHJlcykgPT4ge1xuICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFscycsIHRydWUpO1xuICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nLCAnKicpO1xuICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ0dFVCxPUFRJT05TLFBPU1QnKTtcbiAgcmVzLnNldEhlYWRlcihcbiAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycycsXG4gICAgJ1gtQ1NSRi1Ub2tlbiwgWC1SZXF1ZXN0ZWQtV2l0aCwgQWNjZXB0LCBBY2NlcHQtVmVyc2lvbiwgQ29udGVudC1MZW5ndGgsIENvbnRlbnQtTUQ1LCBDb250ZW50LVR5cGUsIERhdGUsIFgtQXBpLVZlcnNpb24nXG4gICk7XG59O1xuXG4vLyBJbml0aWFsaXplIE9wZW5BSSB3aXRoIHlvdXIgQVBJIGtleVxuY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSSh7XG4gIGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVksXG59KTtcblxuLy8gRnVuY3Rpb24gdG8gY3JlYXRlIHZpZGVvIHdpdGggSGV5R2VuXG5jb25zdCBjcmVhdGVIZXlHZW5WaWRlbyA9IGFzeW5jIChzY3JpcHQsIHVzZXJuYW1lKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgaGV5Z2VuUmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuaGV5Z2VuLmNvbS92Mi92aWRlby9nZW5lcmF0ZScsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnWC1BUEktS0VZJzogcHJvY2Vzcy5lbnYuSEVZR0VOX0FQSV9LRVksXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICB2aWRlb19pbnB1dHM6IFt7XG4gICAgICAgICAgY2hhcmFjdGVyOiB7XG4gICAgICAgICAgICB0eXBlOiBcImF2YXRhclwiLFxuICAgICAgICAgICAgYXZhdGFyX2lkOiBcIlJhdWxfZXhwcmVzc2l2ZV8yMDI0MTEyNTAxXCIsIC8vIFJlcGxhY2Ugd2l0aCB5b3VyIGNob3NlbiBhdmF0YXIgSURcbiAgICAgICAgICAgIGF2YXRhcl9zdHlsZTogXCJub3JtYWxcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAgdm9pY2U6IHtcbiAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICAgICAgaW5wdXRfdGV4dDogc2NyaXB0LFxuICAgICAgICAgICAgdm9pY2VfaWQ6IFwiYTQyNmY4YTc2MzgyNGNlYWFkM2EyZWIyOWM2OGUxMjFcIiwgLy8gUmVwbGFjZSB3aXRoIHlvdXIgY2hvc2VuIHZvaWNlIElEXG4gICAgICAgICAgICBzcGVlZDogMS4wXG4gICAgICAgICAgfSxcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB7XG4gICAgICAgICAgICB0eXBlOiBcImNvbG9yXCIsXG4gICAgICAgICAgICB2YWx1ZTogXCIjZmZmZmZmXCIgLy8gV2hpdGUgYmFja2dyb3VuZCwgY3VzdG9taXplIGFzIG5lZWRlZFxuICAgICAgICAgIH1cbiAgICAgICAgfV0sXG4gICAgICAgIGRpbWVuc2lvbjoge1xuICAgICAgICAgIHdpZHRoOiAxMjgwLFxuICAgICAgICAgIGhlaWdodDogNzIwXG4gICAgICAgIH0sXG4gICAgICAgIGFzcGVjdF9yYXRpbzogXCIxNjo5XCIsXG4gICAgICAgIHRlc3Q6IGZhbHNlIC8vIFNldCB0byB0cnVlIGZvciB0ZXN0aW5nIHdpdGhvdXQgdXNpbmcgY3JlZGl0c1xuICAgICAgfSlcbiAgICB9KTtcblxuICAgIGNvbnN0IGhleWdlbkRhdGEgPSBhd2FpdCBoZXlnZW5SZXNwb25zZS5qc29uKCk7XG5cbiAgICBpZiAoIWhleWdlblJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEhleUdlbiBBUEkgZXJyb3I6ICR7aGV5Z2VuRGF0YS5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHZpZGVvX2lkOiBoZXlnZW5EYXRhLmRhdGEudmlkZW9faWRcbiAgICB9O1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgSGV5R2VuIHZpZGVvOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xuICAvLyBIYW5kbGUgcHJlZmxpZ2h0IE9QVElPTlMgcmVxdWVzdFxuICBpZiAocmVxLm1ldGhvZCA9PT0gJ09QVElPTlMnKSB7XG4gICAgc2V0Q29yc0hlYWRlcnMocmVzKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmVuZCgpO1xuICB9XG4gIFxuICAvLyBFbnN1cmUgd2UncmUgaGFuZGxpbmcgYSBQT1NUIHJlcXVlc3RcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdQT1NUJykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkLiBQbGVhc2UgdXNlIFBPU1QuJyB9KTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgLy8gU2V0IENPUlMgaGVhZGVyc1xuICAgIHNldENvcnNIZWFkZXJzKHJlcyk7XG4gICAgXG4gICAgLy8gR2V0IHRoZSB1c2VybmFtZSBhbmQgb3B0aW9uYWwgY3JlYXRlVmlkZW8gZmxhZyBmcm9tIHRoZSByZXF1ZXN0IGJvZHlcbiAgICBjb25zdCB7IHVzZXJuYW1lLCBjcmVhdGVWaWRlbyA9IGZhbHNlIH0gPSByZXEuYm9keTtcbiAgICBcbiAgICBpZiAoIXVzZXJuYW1lKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1VzZXJuYW1lIGlzIHJlcXVpcmVkJyB9KTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgdGhlIHByb21wdCBmb3IgT3BlbkFJXG4gICAgY29uc3QgcHJvbXB0ID0gYCdHZW5lcmF0ZSBhIHdlbGNvbWUgdmlkZW8gc2NyaXB0IGZvciBhIHVzZXIgbmFtZWQgJHt1c2VybmFtZX0uIFlvdSBhY3QgYXMgQ2lsaWFuLCBhbiBJVCBzcGVjaWFsaXN0IGZyb20gdGhlIElUIGRlcGFydG1lbnQgb2YgdGhlIFN0LiBKb2hucyBNZWRpY2FsIENlbnRyZSBpbiBEdWJsaW4sIElyZWxhbmQuIFlvdXIgc2NyaXB0IHNob3VsZCBiZSBhbG1vc3QgaWRlbnRpY2FsIHRvIHRoaXMgb25lLiBQbGVhc2Ugb25seSBjaGFuZ2UgYSB3b3JkIG9yIHR3byBidXQgc3RheSBpbiB0aGUgY29udGV4dC4gICAtIFdlbGNvbWUgJHt1c2VybmFtZX0gLSBJJ20gQ2lsbGlhbiBmcm9tIHRoZSBJVCBkZXBhcnRtZW50LiBBcyB5b3UgbWlnaHQga25vdywgd2UndmUgYmVlbiBnZXR0aW5nIGEgbG90IG9mIHBoaXNoaW5nIGVtYWlscyBsYXRlbHkg4oCmIEknbSBnbGFkIHNlZWluZyB5b3UgY29udHJpYnV0aW5nIHRvIHRoZSBjb21wYW55J3MgY3liZXIgc2VjdXJpdHkuIEFuZCB3aG8ga25vd3MsIG1heWJlIHlvdSBsZWFybiBhIHRoaW5nIG9yIHR3byBmb3IgeW91ciBwcml2YXRlIGRpZ2l0YWwgc2VjdXJpdHkg4oCmIC0gJ2A7XG5cbiAgICAvLyBDYWxsIE9wZW5BSSBBUEkgdG8gZ2VuZXJhdGUgdGhlIHNjcmlwdCB1c2luZyB0aGUgY2hhdCBjb21wbGV0aW9ucyBlbmRwb2ludFxuICAgIGNvbnN0IGNvbXBsZXRpb24gPSBhd2FpdCBvcGVuYWkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgbW9kZWw6IFwiZ3B0LTMuNS10dXJib1wiLCAvLyBVc2luZyBhIHZhbGlkIG1vZGVsXG4gICAgICBtZXNzYWdlczogW1xuICAgICAgICB7XG4gICAgICAgICAgcm9sZTogXCJzeXN0ZW1cIixcbiAgICAgICAgICBjb250ZW50OiBcIllvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudCB0aGF0IGNyZWF0ZXMgcGVyc29uYWxpemVkIHdlbGNvbWUgc2NyaXB0cy5cIlxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcm9sZTogXCJ1c2VyXCIsXG4gICAgICAgICAgY29udGVudDogcHJvbXB0XG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBtYXhfdG9rZW5zOiAyNTAsXG4gICAgICB0ZW1wZXJhdHVyZTogMC43LFxuICAgIH0pO1xuXG4gICAgLy8gRXh0cmFjdCB0aGUgZ2VuZXJhdGVkIHNjcmlwdFxuICAgIGNvbnN0IGdlbmVyYXRlZFNjcmlwdCA9IGNvbXBsZXRpb24uY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQudHJpbSgpO1xuXG4gICAgLy8gSWYgY3JlYXRlVmlkZW8gaXMgZmFsc2UsIGp1c3QgcmV0dXJuIHRoZSBzY3JpcHQgKHlvdXIgb3JpZ2luYWwgZnVuY3Rpb25hbGl0eSlcbiAgICBpZiAoIWNyZWF0ZVZpZGVvKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBzY3JpcHQ6IGdlbmVyYXRlZFNjcmlwdFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gSWYgY3JlYXRlVmlkZW8gaXMgdHJ1ZSwgYWxzbyBjcmVhdGUgdGhlIEhleUdlbiB2aWRlb1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB2aWRlb1Jlc3VsdCA9IGF3YWl0IGNyZWF0ZUhleUdlblZpZGVvKGdlbmVyYXRlZFNjcmlwdCwgdXNlcm5hbWUpO1xuICAgICAgXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBzY3JpcHQ6IGdlbmVyYXRlZFNjcmlwdCxcbiAgICAgICAgdmlkZW9faWQ6IHZpZGVvUmVzdWx0LnZpZGVvX2lkLFxuICAgICAgICBtZXNzYWdlOiAnU2NyaXB0IGdlbmVyYXRlZCBhbmQgdmlkZW8gY3JlYXRpb24gc3RhcnRlZCdcbiAgICAgIH0pO1xuICAgICAgXG4gICAgfSBjYXRjaCAodmlkZW9FcnJvcikge1xuICAgICAgLy8gSWYgdmlkZW8gY3JlYXRpb24gZmFpbHMsIHN0aWxsIHJldHVybiB0aGUgc2NyaXB0XG4gICAgICBjb25zb2xlLmVycm9yKCdWaWRlbyBjcmVhdGlvbiBmYWlsZWQ6JywgdmlkZW9FcnJvcik7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBzY3JpcHQ6IGdlbmVyYXRlZFNjcmlwdCxcbiAgICAgICAgdmlkZW9fZXJyb3I6ICdWaWRlbyBjcmVhdGlvbiBmYWlsZWQsIGJ1dCBzY3JpcHQgd2FzIGdlbmVyYXRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICB2aWRlb19lcnJvcl9kZXRhaWxzOiB2aWRlb0Vycm9yLm1lc3NhZ2VcbiAgICAgIH0pO1xuICAgIH1cblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdlbmVyYXRpbmcgc2NyaXB0OicsIGVycm9yKTtcbiAgICBcbiAgICAvLyBEZXRlcm1pbmUgdGhlIGVycm9yIHN0YXR1cyBjb2RlIGFuZCBtZXNzYWdlXG4gICAgY29uc3Qgc3RhdHVzQ29kZSA9IGVycm9yLnJlc3BvbnNlPy5zdGF0dXMgfHwgNTAwO1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yLnJlc3BvbnNlPy5kYXRhPy5lcnJvcj8ubWVzc2FnZSB8fCBlcnJvci5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gZ2VuZXJhdGUgc2NyaXB0JztcbiAgICBcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhzdGF0dXNDb2RlKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZVxuICAgIH0pO1xuICB9XG59Il0sIm5hbWVzIjpbIk9wZW5BSSIsImNvbmZpZyIsImFwaSIsImJvZHlQYXJzZXIiLCJzaXplTGltaXQiLCJleHRlcm5hbFJlc29sdmVyIiwic2V0Q29yc0hlYWRlcnMiLCJyZXMiLCJzZXRIZWFkZXIiLCJvcGVuYWkiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiT1BFTkFJX0FQSV9LRVkiLCJjcmVhdGVIZXlHZW5WaWRlbyIsInNjcmlwdCIsInVzZXJuYW1lIiwiaGV5Z2VuUmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJIRVlHRU5fQVBJX0tFWSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidmlkZW9faW5wdXRzIiwiY2hhcmFjdGVyIiwidHlwZSIsImF2YXRhcl9pZCIsImF2YXRhcl9zdHlsZSIsInZvaWNlIiwiaW5wdXRfdGV4dCIsInZvaWNlX2lkIiwic3BlZWQiLCJiYWNrZ3JvdW5kIiwidmFsdWUiLCJkaW1lbnNpb24iLCJ3aWR0aCIsImhlaWdodCIsImFzcGVjdF9yYXRpbyIsInRlc3QiLCJoZXlnZW5EYXRhIiwianNvbiIsIm9rIiwiRXJyb3IiLCJtZXNzYWdlIiwic3VjY2VzcyIsInZpZGVvX2lkIiwiZGF0YSIsImVycm9yIiwiY29uc29sZSIsImhhbmRsZXIiLCJyZXEiLCJzdGF0dXMiLCJlbmQiLCJjcmVhdGVWaWRlbyIsInByb21wdCIsImNvbXBsZXRpb24iLCJjaGF0IiwiY29tcGxldGlvbnMiLCJjcmVhdGUiLCJtb2RlbCIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJtYXhfdG9rZW5zIiwidGVtcGVyYXR1cmUiLCJnZW5lcmF0ZWRTY3JpcHQiLCJjaG9pY2VzIiwidHJpbSIsInZpZGVvUmVzdWx0IiwidmlkZW9FcnJvciIsInZpZGVvX2Vycm9yIiwidmlkZW9fZXJyb3JfZGV0YWlscyIsInN0YXR1c0NvZGUiLCJyZXNwb25zZSIsImVycm9yTWVzc2FnZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/generate-script.js\n");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "openai":
/*!*************************!*\
  !*** external "openai" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("openai");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate-script&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fgenerate-script.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();